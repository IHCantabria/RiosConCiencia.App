(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fd14592a"],{"4df4":function(t,e,n){"use strict";var r=n("0366"),a=n("7b0b"),i=n("9bdd"),s=n("e95a"),o=n("50c4"),c=n("8418"),u=n("35a1");t.exports=function(t){var e,n,l,d,p,f,b=a(t),v="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,g=void 0!==m,S=u(b),y=0;if(g&&(m=r(m,h>2?arguments[2]:void 0,2)),void 0==S||v==Array&&s(S))for(e=o(b.length),n=new v(e);e>y;y++)f=g?m(b[y],y):b[y],c(n,y,f);else for(d=S.call(b),p=d.next,n=new v;!(l=p.call(d)).done;y++)f=g?i(d,m,[l.value,y],!0):l.value,c(n,y,f);return n.length=y,n}},5046:function(t,e,n){"use strict";var r=n("7fcc"),a=n.n(r);a.a},5797:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return d})),n.d(e,"d",(function(){return c})),n.d(e,"c",(function(){return u})),n.d(e,"e",(function(){return p})),n.d(e,"f",(function(){return f}));n("99af"),n("96cf");var r=n("1da1"),a={public:"https://apiriosconciencia.ihcantabria.com/v1/public/RiosConCiencia"},i=n("bc3a"),s=n.n(i),o={"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS"},c=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var r,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="".concat(a.public,"/Authenticate"),i={email:e,password:n},t.next=4,s.a.post(r,i);case 4:return o=t.sent,t.abrupt("return",o.data);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),u=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="".concat(a.public,"/GetRiverSectionsByUserId/").concat(n),o.Authorization="Bearer ".concat(e),t.next=4,s.a.get(r,{headers:o});case 4:return i=t.sent,t.abrupt("return",i.data);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),l=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="".concat(a.public,"/GetSectionsExpertMasterData"),o.Authorization="Bearer ".concat(e),t.next=4,s.a.get(n,{headers:o});case 4:return r=t.sent,t.abrupt("return",r.data);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="".concat(a.public,"/GetSectionsPictsMasterData"),o.Authorization="Bearer ".concat(e),t.next=4,s.a.get(n,{headers:o});case 4:return r=t.sent,t.abrupt("return",r.data);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="".concat(a.public,"/SaveSample"),o.Authorization="Bearer ".concat(e),t.next=4,s.a.post(r,n,{headers:o});case 4:return i=t.sent,t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),f=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="".concat(a.public,"/SaveSamplePict"),o.Authorization="Bearer ".concat(e),t.next=4,s.a.post(r,n,{headers:o});case 4:return i=t.sent,t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},"7fcc":function(t,e,n){},"91a4":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-section"},[t.isFormExpertValid?n("div",{staticClass:"block"},[n("b-message",{staticClass:"results-display",attrs:{title:"Resumen",type:"is-success",closable:!1}},[n("b-field",{attrs:{label:"Hábitat Fluvial"}},[n("b-tag",{attrs:{type:"is-info",size:"is-medium"}},[t._v(t._s(t.habitatQuality.results.habitatIndex.cat.name))])],1),n("b-field",{attrs:{label:"Calidad Biológica del Agua"}},[n("b-tag",{attrs:{type:"is-info",size:"is-medium"}},[t._v(t._s(t.bioQuality.results.bioQualityIndex.name))])],1),n("b-field",{attrs:{label:"Calidad del Bosque de Ribera"}},[n("b-tag",{attrs:{type:"is-info",size:"is-medium"}},[t._v(t._s(t.riverQuality.results.qrisiIndex.cat.name))])],1)],1)],1):t._e(),n("h5",{staticClass:"title is-5"},[t._v("8. Estado ecológico")]),n("div",[t.isFormExpertValid?n("div",{staticClass:"block"},[n("b-message",{staticClass:"results-display",attrs:{title:t.ecoStatusIndex.name,type:"is-info",closable:!1}},[t._v(" "+t._s(t.ecoStatusIndex.description)+" "),n("div",{staticClass:"results__rate"},[n("b-rate",{attrs:{"icon-pack":"mdi",icon:"star",size:"is-medium","show-text":!1,disabled:!0},model:{value:t.ecoStatusIndex.value,callback:function(e){t.$set(t.ecoStatusIndex,"value",e)},expression:"ecoStatusIndex.value"}})],1)])],1):n("div",{staticClass:"block"},[n("b-message",{staticClass:"results-display",attrs:{title:"Formulario incompleto",type:"is-warning",closable:!1}},[t._v(" No podrás enviar el formulario hasta que completes todas las secciones que están incompletas. ")])],1),t.isComputedOnline?t._e():n("div",{staticClass:"block"},[t.isFormExpertValid?n("b-message",{staticClass:"results-display",attrs:{title:"Estado sin conexión",type:"is-warning",closable:!1}},[t._v(" Actualmente te encuentras sin conexión a internet, mantente en esta pantalla y espera a tener conexión para enviar el formulario. ")]):n("b-message",{staticClass:"results-display",attrs:{title:"Estado sin conexión",type:"is-warning",closable:!1}},[t._v(" Actualmente te encuentras sin conexión a internet, no podras enviar el formulario hasta que dispongas de conexión. ")])],1)]),n("b-field",{staticClass:"observations-field",attrs:{label:"Si ha ocurrido algo reseñable durante el muestreo o has encontrado algo que no has podido reflejar en el formulario, detállalo aquí:"}},[n("b-input",{attrs:{maxlength:"300",type:"textarea"},model:{value:t.values.observations,callback:function(e){t.$set(t.values,"observations",e)},expression:"values.observations"}})],1),n("div",{staticClass:"big-button"},[n("b-button",{attrs:{type:"is-danger",size:"is-medium",expanded:"",disabled:!t.isReadySend||t.isSendActive},on:{click:function(e){return t.sendSampleData()}}},[t._v("Enviar Resultados")])],1),n("spinner",{attrs:{"is-loading":t.isSendingData}})],1)},a=[],i=(n("b64b"),n("d3b7"),n("ddb0"),n("b85c")),s=(n("96cf"),n("1da1")),o=n("5530"),c=n("5797"),u=n("2f62"),l={name:"FormEcoResult",components:{spinner:function(){return n.e("chunk-5e45d951").then(n.bind(null,"3a5e"))}},data:function(){return{values:{ecoStatus:{}},isSendingData:!1,isSendActive:!1}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(u["d"])({user:function(t){return t.user},statusOptions:function(t){return t.formExpertSections.ecoResult.data.ecologicalStateOptions},formSections:function(t){return t.formExpertSections},habitatQuality:function(t){return t.formExpertSections.habitat},riverQuality:function(t){return t.formExpertSections.riverQuality},bioQuality:function(t){return t.formExpertSections.biological}})),Object(u["c"])({isFormExpertValid:"isFormExpertValid"})),{},{ecoStatusIndex:function(){return this.isFormExpertValid?this.calculateStatus():null},isReadySend:function(){return this.isFormExpertValid&&this.isComputedOnline},isSectionValid:function(){return null!==this.ecoStatusIndex}}),beforeUpdate:function(){this.updateSpecificExpertSectionValues({name:"ecoResult",values:this.values,isValid:this.isSectionValid})},methods:Object(o["a"])(Object(o["a"])({},Object(u["b"])({updateSpecificExpertSectionValues:"updateSpecificExpertSectionValues"})),{},{calculateStatus:function(){var t=this.riverQuality.results.qrisiIndex.cat.value,e=this.bioQuality.results.bioQualityIndex.value;return 0==e?this._getStatusForNoCalculable():3===t?this._getStatusForGoodQrisi(e):2===t?this._getStatusForIntermediateQrisi(e):1===t?this._getStatusForBadQrisi(e):void 0},sendSampleData:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isSendActive=!0,t.values.ecoStatus=t.ecoStatusIndex,n=t._prepareSampleObj(),e.prev=3,t.isSendingData=!0,e.next=7,Object(c["e"])(t.user.token,n);case 7:r=t.$buefy.toast.open({message:"¡Enhorabuena! El formulario se ha enviado con éxito",type:"is-success",duration:6e3}),r.$on("close",(function(){t.isSendActive=!1,t.$root.$emit("clearExpert")})),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](3),a=t.$buefy.toast.open({message:"Ooops, se ha producido un error intentando enviar el formulario",type:"is-danger",duration:6e3}),a.$on("close",(function(){t.isSendActive=!1}));case 15:return e.prev=15,t.isSendingData=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,11,15,18]])})))()},_prepareSampleObj:function(){for(var t={},e=0,n=Object.keys(this.formSections);e<n.length;e++){var r=n[e];t=Object(o["a"])(Object(o["a"])(Object(o["a"])({},t),this.formSections[r].results),{},{user:this.user,ecoStatus:this.ecoStatusIndex})}return t.riverMarginConditions=this._setupRiverMarginsValues(this.formSections.basic.results.riverMarginConditionsLeft,this.formSections.basic.results.riverMarginConditionsRight,this.formSections.basic.data.riverSideOptions),t.riverMarginLandUse=this._setupRiverMarginsValues(this.formSections.basic.results.riverMarginLandUseLeft,this.formSections.basic.results.riverMarginLandUseRight,this.formSections.basic.data.riverSideOptions),t},_setupRiverMarginsValues:function(t,e,n){var r,a=[],s=Object(i["a"])(t);try{for(s.s();!(r=s.n()).done;){var o=r.value;o.side=n[0].id,a.push(o)}}catch(d){s.e(d)}finally{s.f()}var c,u=Object(i["a"])(e);try{for(u.s();!(c=u.n()).done;){var l=c.value;l.side=n[1].id,a.push(l)}}catch(d){u.e(d)}finally{u.f()}return a},_getStatusForGoodQrisi:function(t){return 5===t?this.statusOptions[0]:4===t?this.statusOptions[1]:3===t?this.statusOptions[2]:2===t?this.statusOptions[3]:this.statusOptions[4]},_getStatusForIntermediateQrisi:function(t){return 5===t?this.statusOptions[1]:4===t?this.statusOptions[2]:3===t?this.statusOptions[3]:this.statusOptions[4]},_getStatusForBadQrisi:function(t){return 5===t?this.statusOptions[2]:4===t?this.statusOptions[3]:this.statusOptions[4]},_getStatusForNoCalculable:function(){return this.statusOptions[5]}})},d=l,p=(n("5046"),n("2877")),f=Object(p["a"])(d,r,a,!1,null,"41601162",null);e["default"]=f.exports},a630:function(t,e,n){var r=n("23e7"),a=n("4df4"),i=n("1c7e"),s=!i((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:s},{from:a})},b85c:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0"),n("a630"),n("fb6a"),n("b0c0"),n("25f0");function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function i(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=a(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,s=t},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(c)throw s}}}}},d28b:function(t,e,n){var r=n("746f");r("iterator")},e01a:function(t,e,n){"use strict";var r=n("23e7"),a=n("83ab"),i=n("da84"),s=n("5135"),o=n("861d"),c=n("9bf2").f,u=n("e893"),l=i.Symbol;if(a&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var d={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof p?new l(t):void 0===t?l():l(t);return""===t&&(d[e]=!0),e};u(p,l);var f=p.prototype=l.prototype;f.constructor=p;var b=f.toString,v="Symbol(test)"==String(l("test")),h=/^Symbol\((.*)\)[^)]+$/;c(f,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=b.call(t);if(s(d,t))return"";var n=v?e.slice(7,-1):e.replace(h,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:p})}},fb6a:function(t,e,n){"use strict";var r=n("23e7"),a=n("861d"),i=n("e8b5"),s=n("23cb"),o=n("50c4"),c=n("fc6a"),u=n("8418"),l=n("b622"),d=n("1dde"),p=n("ae40"),f=d("slice"),b=p("slice",{ACCESSORS:!0,0:0,1:2}),v=l("species"),h=[].slice,m=Math.max;r({target:"Array",proto:!0,forced:!f||!b},{slice:function(t,e){var n,r,l,d=c(this),p=o(d.length),f=s(t,p),b=s(void 0===e?p:e,p);if(i(d)&&(n=d.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?a(n)&&(n=n[v],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return h.call(d,f,b);for(r=new(void 0===n?Array:n)(m(b-f,0)),l=0;f<b;f++,l++)f in d&&u(r,l,d[f]);return r.length=l,r}})}}]);