(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a95305c"],{"004e":function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-section"},[t.isFormValid?r("div",{staticClass:"block"},[r("b-message",{attrs:{title:"Resumen",type:"is-success"}},[r("b-field",{attrs:{label:"Hábitat Fluvial"}},[r("b-tag",{attrs:{type:"is-info",size:"is-medium"}},[t._v(t._s(t.bioQuality.results.bioQualityIndex.name))])],1),r("b-field",{attrs:{label:"Calidad Biológica del Agua"}},[r("b-tag",{attrs:{type:"is-info",size:"is-medium"}},[t._v(t._s(t.bioQuality.results.bioQualityIndex.name))])],1),r("b-field",{attrs:{label:"Calidad del Bosque de Ribera"}},[r("b-tag",{attrs:{type:"is-info",size:"is-medium"}},[t._v(t._s(t.riverQuality.results.qrisiIndex.cat.name))])],1)],1)],1):t._e(),r("h5",{staticClass:"title is-5"},[t._v("8. Estado ecológico")]),r("div",[t.isFormValid?r("div",{staticClass:"block"},[r("b-message",{attrs:{title:t.ecoStatusIndex.name,type:"is-info",closable:!1}},[t._v(" "+t._s(t.ecoStatusIndex.description)+" "),r("div",{staticClass:"results__rate"},[r("b-rate",{attrs:{"icon-pack":"mdi",icon:"star",size:"is-medium","show-text":!1,disabled:!0},model:{value:t.ecoStatusIndex.value,callback:function(e){t.$set(t.ecoStatusIndex,"value",e)},expression:"ecoStatusIndex.value"}})],1)])],1):r("div",{staticClass:"block"},[r("b-message",{attrs:{title:"Formulario incompleto",type:"is-warning",closable:!1}},[t._v(" Hace falta completar la CALIDAD DEL AGUA y la CALIDAD DEL BOSQUE DE RIBERA para ver el resultado del Estado Ecológico. ")])],1)]),r("div",{staticClass:"big-button"},[r("b-button",{attrs:{type:"is-danger",size:"is-medium",expanded:"",disabled:!t.isFormValid},on:{click:function(e){return t.sendSampleData()}}},[t._v("Enviar Resultados")])],1),r("spinner",{attrs:{"is-loading":t.isSendingData}})],1)},s=[],n=(r("a4d3"),r("e01a"),r("d28b"),r("4de4"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("3ca3"),r("159b"),r("ddb0"),r("96cf"),r("ade3")),a=r("5797"),o=r("2f62");function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){Object(n["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var l={name:"FormEcoResult",components:{spinner:function(){return r.e("chunk-5e45d951").then(r.bind(null,"3a5e"))}},data:function(){return{values:{ecoStatus:{}},isSendingData:!1}},computed:c({},Object(o["d"])({user:function(t){return t.user},statusOptions:function(t){return t.formSections.ecoResult.data.ecologicalStateOptions},formSections:function(t){return t.formSections},riverQuality:function(t){return t.formSections.riverQuality},bioQuality:function(t){return t.formSections.biological}}),{},Object(o["c"])({isFormValid:"isFormValid"}),{ecoStatusIndex:function(){return this.isFormValid?this.calculateStatus():null},isSectionValid:function(){return null!==this.ecoStatusIndex}}),methods:c({},Object(o["b"])({updateSectionValues:"updateSectionValues"}),{calculateStatus:function(){var t=this.riverQuality.results.qrisiIndex.cat.value,e=this.bioQuality.results.bioQualityIndex.value;return 3===t?this._getStatusForGoodQrisi(e):2===t?this._getStatusForIntermediateQrisi(e):1===t?this._getStatusForBadQrisi(e):void 0},sendSampleData:function(){var t,e;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return this.values.ecoStatus=this.ecoStatusIndex,t=this._prepareSampleObj(),r.prev=2,this.isSendingData=!0,r.next=6,regeneratorRuntime.awrap(Object(a["d"])(this.user.token,t));case 6:e=r.sent,console.log(e),this.$buefy.toast.open({message:"¡Enhorabuena! El formulario se ha enviado con éxito",type:"is-success"}),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](2),this.$buefy.toast.open({message:"Ooops, se ha producido un error intentando enviar el formulario",type:"is-danger"});case 14:return r.prev=14,this.isSendingData=!1,r.finish(14);case 17:case"end":return r.stop()}}),null,this,[[2,11,14,17]])},_prepareSampleObj:function(){for(var t={},e=0,r=Object.keys(this.formSections);e<r.length;e++){var i=r[e];t=c({},t,{},this.formSections[i].results,{user:this.user,ecoStatus:{cat:this.ecoStatusIndex,totalPoints:0}})}return t.riverMarginConditions=this._setupRiverMarginsValues(this.formSections.basic.results.riverMarginConditionsLeft,this.formSections.basic.results.riverMarginConditionsRight),t.riverMarginLandUse=this._setupRiverMarginsValues(this.formSections.basic.results.riverMarginLandUseLeft,this.formSections.basic.results.riverMarginLandUseRight),t},_setupRiverMarginsValues:function(t,e){var r=[],i=!0,s=!1,n=void 0;try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var u=a.value;u.side=1,r.push(u)}}catch(v){s=!0,n=v}finally{try{i||null==o.return||o.return()}finally{if(s)throw n}}var c=!0,l=!1,d=void 0;try{for(var p,f=e[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var b=p.value;b.side=2,r.push(b)}}catch(v){l=!0,d=v}finally{try{c||null==f.return||f.return()}finally{if(l)throw d}}return r},_getStatusForGoodQrisi:function(t){return 5===t?this.statusOptions[0]:4===t?this.statusOptions[1]:3===t?this.statusOptions[2]:2===t?this.statusOptions[3]:this.statusOptions[4]},_getStatusForIntermediateQrisi:function(t){return 5===t?this.statusOptions[1]:4===t?this.statusOptions[2]:3===t?this.statusOptions[3]:this.statusOptions[4]},_getStatusForBadQrisi:function(t){return 5===t?this.statusOptions[2]:4===t?this.statusOptions[3]:this.statusOptions[4]}})},d=l,p=(r("2ad9"),r("2877")),f=Object(p["a"])(d,i,s,!1,null,"f27c7214",null);e["default"]=f.exports},"2ad9":function(t,e,r){"use strict";var i=r("3c06"),s=r.n(i);s.a},"3c06":function(t,e,r){},5797:function(t,e,r){"use strict";r("99af"),r("d3b7"),r("96cf");var i={public:"https://apiriosconciencia.ihcantabria.com/v1/public/RiosConCiencia"},s=r("bc3a"),n=r.n(s);r.d(e,"a",(function(){return c})),r.d(e,"c",(function(){return o})),r.d(e,"b",(function(){return u})),r.d(e,"d",(function(){return l}));var a={"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS"},o=function(t,e){var r,s,a;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return r="".concat(i.public,"/Authenticate"),s={email:t,password:e},o.next=4,regeneratorRuntime.awrap(n.a.post(r,s));case 4:return a=o.sent,o.abrupt("return",a.data);case 6:case"end":return o.stop()}}))},u=function(t,e){var r,s;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return r="".concat(i.public,"/GetRiverSectionsByUserId/").concat(e),a.Authorization="Bearer ".concat(t),o.next=4,regeneratorRuntime.awrap(n.a.get(r,{headers:a}));case 4:return s=o.sent,o.abrupt("return",s.data);case 6:case"end":return o.stop()}}))},c=function(t){var e,r;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return e="".concat(i.public,"/GetSectionsMasterData"),a.Authorization="Bearer ".concat(t),s.next=4,regeneratorRuntime.awrap(n.a.get(e,{headers:a}));case 4:return r=s.sent,s.abrupt("return",r.data);case 6:case"end":return s.stop()}}))},l=function(t,e){var r,s;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return r="".concat(i.public,"/SaveSample"),a.Authorization="Bearer ".concat(t),o.next=4,regeneratorRuntime.awrap(n.a.post(r,e,{headers:a}));case 4:return s=o.sent,o.abrupt("return",s);case 6:case"end":return o.stop()}}))}},d28b:function(t,e,r){var i=r("746f");i("iterator")},e01a:function(t,e,r){"use strict";var i=r("23e7"),s=r("83ab"),n=r("da84"),a=r("5135"),o=r("861d"),u=r("9bf2").f,c=r("e893"),l=n.Symbol;if(s&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var d={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof p?new l(t):void 0===t?l():l(t);return""===t&&(d[e]=!0),e};c(p,l);var f=p.prototype=l.prototype;f.constructor=p;var b=f.toString,v="Symbol(test)"==String(l("test")),h=/^Symbol\((.*)\)[^)]+$/;u(f,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=b.call(t);if(a(d,t))return"";var r=v?e.slice(7,-1):e.replace(h,"$1");return""===r?void 0:r}}),i({global:!0,forced:!0},{Symbol:p})}}}]);
//# sourceMappingURL=chunk-3a95305c.cee9b46e.js.map