(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18cfcd80"],{"3ad3":function(t,e,a){},"4ca3":function(t,e,a){"use strict";var r=a("3ad3"),n=a.n(r);n.a},5797:function(t,e,a){"use strict";a.d(e,"a",(function(){return l})),a.d(e,"b",(function(){return d})),a.d(e,"d",(function(){return u})),a.d(e,"c",(function(){return c})),a.d(e,"e",(function(){return p})),a.d(e,"f",(function(){return f}));a("99af"),a("96cf");var r=a("1da1"),n={public:"https://apiriosconciencia.ihcantabria.com/v1/public/RiosConCiencia"},i=a("bc3a"),s=a.n(i),o={"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS"},u=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,a){var r,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="".concat(n.public,"/Authenticate"),i={email:e,password:a},t.next=4,s.a.post(r,i);case 4:return o=t.sent,t.abrupt("return",o.data);case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),c=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,a){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="".concat(n.public,"/GetRiverSectionsByUserId/").concat(a),o.Authorization="Bearer ".concat(e),t.next=4,s.a.get(r,{headers:o});case 4:return i=t.sent,t.abrupt("return",i.data);case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),l=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="".concat(n.public,"/GetSectionsExpertMasterData"),o.Authorization="Bearer ".concat(e),t.next=4,s.a.get(a,{headers:o});case 4:return r=t.sent,t.abrupt("return",r.data);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="".concat(n.public,"/GetSectionsPictsMasterData"),o.Authorization="Bearer ".concat(e),t.next=4,s.a.get(a,{headers:o});case 4:return r=t.sent,t.abrupt("return",r.data);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,a){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="".concat(n.public,"/SaveSample"),o.Authorization="Bearer ".concat(e),t.next=4,s.a.post(r,a,{headers:o});case 4:return i=t.sent,t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),f=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,a){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="".concat(n.public,"/SaveSamplePict"),o.Authorization="Bearer ".concat(e),t.next=4,s.a.post(r,a,{headers:o});case 4:return i=t.sent,t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},"91a4":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-section"},[t.isFormExpertValid?a("div",{staticClass:"block"},[a("b-message",{staticClass:"results-display",attrs:{title:"Resumen",type:"is-success",closable:!1}},[a("b-field",{attrs:{label:"Hábitat Fluvial"}},[a("b-tag",{attrs:{type:"is-info",size:"is-medium"}},[t._v(t._s(t.habitatQuality.results.habitatIndex.cat.name))])],1),a("b-field",{attrs:{label:"Calidad Biológica del Agua"}},[a("b-tag",{attrs:{type:"is-info",size:"is-medium"}},[t._v(t._s(t.bioQuality.results.bioQualityIndex.name))])],1),a("b-field",{attrs:{label:"Calidad del Bosque de Ribera"}},[a("b-tag",{attrs:{type:"is-info",size:"is-medium"}},[t._v(t._s(t.riverQuality.results.qrisiIndex.cat.name))])],1)],1)],1):t._e(),a("h5",{staticClass:"title is-5"},[t._v("8. Estado Ecológico")]),a("div",[t.isFormExpertValid?a("div",{staticClass:"block"},[a("b-message",{staticClass:"results-display",attrs:{title:t.ecoStatusIndex.name,type:"is-info",closable:!1}},[t._v(" "+t._s(t.ecoStatusIndex.description)+" "),a("div",{staticClass:"results__rate"},[a("b-rate",{attrs:{"icon-pack":"mdi",icon:"star",size:"is-medium","show-text":!1,disabled:!0},model:{value:t.ecoStatusIndex.value,callback:function(e){t.$set(t.ecoStatusIndex,"value",e)},expression:"ecoStatusIndex.value"}})],1)])],1):a("div",{staticClass:"block"},[a("b-message",{staticClass:"results-display",attrs:{title:"Formulario incompleto",type:"is-warning",closable:!1}},[t._v(" No podrás enviar el formulario hasta que completes todas las secciones que están incompletas. ")])],1),t.isComputedOnline?t._e():a("div",{staticClass:"block"},[t.isFormExpertValid?a("b-message",{staticClass:"results-display",attrs:{title:"Estado sin conexión",type:"is-warning",closable:!1}},[t._v(" Actualmente te encuentras sin conexión a internet, mantente en esta pantalla y espera a tener conexión para enviar el formulario. ")]):a("b-message",{staticClass:"results-display",attrs:{title:"Estado sin conexión",type:"is-warning",closable:!1}},[t._v(" Actualmente te encuentras sin conexión a internet, no podras enviar el formulario hasta que dispongas de conexión. ")])],1)]),a("b-field",{staticClass:"observations-field",attrs:{label:"Si hay ocurrido algo reseñable durante el muestreo o ha encontrado algo que no ha podido ser cubierto en el formulario, detállelo aquí:"}},[a("b-input",{attrs:{maxlength:"300",type:"textarea"},model:{value:t.values.observations,callback:function(e){t.$set(t.values,"observations",e)},expression:"values.observations"}})],1),a("div",{staticClass:"big-button"},[a("b-button",{attrs:{type:"is-danger",size:"is-medium",expanded:"",disabled:!t.isReadySend},on:{click:function(e){return t.sendSampleData()}}},[t._v("Enviar Resultados")])],1),a("spinner",{attrs:{"is-loading":t.isSendingData}})],1)},n=[],i=(a("a4d3"),a("e01a"),a("d28b"),a("b64b"),a("d3b7"),a("3ca3"),a("ddb0"),a("96cf"),a("1da1")),s=a("5530"),o=a("5797"),u=a("2f62"),c={name:"FormEcoResult",components:{spinner:function(){return a.e("chunk-5e45d951").then(a.bind(null,"3a5e"))}},data:function(){return{values:{ecoStatus:{}},isSendingData:!1}},computed:Object(s["a"])({},Object(u["d"])({user:function(t){return t.user},statusOptions:function(t){return t.formExpertSections.ecoResult.data.ecologicalStateOptions},formSections:function(t){return t.formExpertSections},habitatQuality:function(t){return t.formExpertSections.habitat},riverQuality:function(t){return t.formExpertSections.riverQuality},bioQuality:function(t){return t.formExpertSections.biological}}),{},Object(u["c"])({isFormExpertValid:"isFormExpertValid"}),{ecoStatusIndex:function(){return this.isFormExpertValid?this.calculateStatus():null},isReadySend:function(){return this.isFormExpertValid&&this.isComputedOnline},isSectionValid:function(){return null!==this.ecoStatusIndex}}),beforeUpdate:function(){this.updateSpecificExpertSectionValues({name:"ecoResult",values:this.values,isValid:this.isSectionValid})},methods:Object(s["a"])({},Object(u["b"])({updateSpecificExpertSectionValues:"updateSpecificExpertSectionValues"}),{calculateStatus:function(){var t=this.riverQuality.results.qrisiIndex.cat.value,e=this.bioQuality.results.bioQualityIndex.value;return 0==e?this._getStatusForNoCalculable():3===t?this._getStatusForGoodQrisi(e):2===t?this._getStatusForIntermediateQrisi(e):1===t?this._getStatusForBadQrisi(e):void 0},sendSampleData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.values.ecoStatus=t.ecoStatusIndex,a=t._prepareSampleObj(),e.prev=2,t.isSendingData=!0,e.next=6,Object(o["e"])(t.user.token,a);case 6:r=t.$buefy.toast.open({message:"¡Enhorabuena! El formulario se ha enviado con éxito",type:"is-success",duration:5e3}),r.$on("close",(function(){t.$root.$emit("clearExpert")})),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),t.$buefy.toast.open({message:"Ooops, se ha producido un error intentando enviar el formulario",type:"is-danger",duration:4e3});case 13:return e.prev=13,t.isSendingData=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})))()},_prepareSampleObj:function(){for(var t={},e=0,a=Object.keys(this.formSections);e<a.length;e++){var r=a[e];t=Object(s["a"])({},t,{},this.formSections[r].results,{user:this.user,ecoStatus:this.ecoStatusIndex})}return t.riverMarginConditions=this._setupRiverMarginsValues(this.formSections.basic.results.riverMarginConditionsLeft,this.formSections.basic.results.riverMarginConditionsRight,this.formSections.basic.data.riverSideOptions),t.riverMarginLandUse=this._setupRiverMarginsValues(this.formSections.basic.results.riverMarginLandUseLeft,this.formSections.basic.results.riverMarginLandUseRight,this.formSections.basic.data.riverSideOptions),t},_setupRiverMarginsValues:function(t,e,a){var r=[],n=!0,i=!1,s=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var c=o.value;c.side=a[0].id,r.push(c)}}catch(h){i=!0,s=h}finally{try{n||null==u.return||u.return()}finally{if(i)throw s}}var l=!0,d=!1,p=void 0;try{for(var f,b=e[Symbol.iterator]();!(l=(f=b.next()).done);l=!0){var v=f.value;v.side=a[1].id,r.push(v)}}catch(h){d=!0,p=h}finally{try{l||null==b.return||b.return()}finally{if(d)throw p}}return r},_getStatusForGoodQrisi:function(t){return 5===t?this.statusOptions[0]:4===t?this.statusOptions[1]:3===t?this.statusOptions[2]:2===t?this.statusOptions[3]:this.statusOptions[4]},_getStatusForIntermediateQrisi:function(t){return 5===t?this.statusOptions[1]:4===t?this.statusOptions[2]:3===t?this.statusOptions[3]:this.statusOptions[4]},_getStatusForBadQrisi:function(t){return 5===t?this.statusOptions[2]:4===t?this.statusOptions[3]:this.statusOptions[4]},_getStatusForNoCalculable:function(){return this.statusOptions[5]}})},l=c,d=(a("4ca3"),a("2877")),p=Object(d["a"])(l,r,n,!1,null,"1217c568",null);e["default"]=p.exports},d28b:function(t,e,a){var r=a("746f");r("iterator")},e01a:function(t,e,a){"use strict";var r=a("23e7"),n=a("83ab"),i=a("da84"),s=a("5135"),o=a("861d"),u=a("9bf2").f,c=a("e893"),l=i.Symbol;if(n&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var d={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof p?new l(t):void 0===t?l():l(t);return""===t&&(d[e]=!0),e};c(p,l);var f=p.prototype=l.prototype;f.constructor=p;var b=f.toString,v="Symbol(test)"==String(l("test")),h=/^Symbol\((.*)\)[^)]+$/;u(f,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=b.call(t);if(s(d,t))return"";var a=v?e.slice(7,-1):e.replace(h,"$1");return""===a?void 0:a}}),r({global:!0,forced:!0},{Symbol:p})}}}]);